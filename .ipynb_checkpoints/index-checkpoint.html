<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Meropis: Artificial Population Generator</title>

    <!-- Bootstrap 4 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">


    </style>
</head>

<body>
    <div class="container mt-5">
        <h1 class="display-4 mb-4">Meropis: Artificial Population Generator for Geospatial Simulation</h1>

        <div class="card mb-5">
            <div class="card-body">
                <h2 class="card-title h3 mb-3">Overview</h2>
                <p class="card-text">
                    Meropis is an artificial population generator for geospatial simulation. The population is of the
                    fictional island mentioned by ancient Greek writer Theopompus of Chios.

                </p>
                <p>
                    The GitHub repository is here <a href="https://github.com/ricci-colasanti/Meropis">https://github.com/ricci-colasanti/Meropis</a>
                </p>
                <p class="card-text">
                    These sets of notebooks implements an <strong>artificial population generator</strong> that create
                    mythical but demographically realistic <strong>adult demographic profiles</strong> (16+ years) for
                    geospatial analysis and policy simulation. The system simulates diverse adult populations across
                    different geographic area types, with detailed household structures and individual socioeconomic
                    attributes.
                </p>

                <div class="alert alert-info mt-3">
                    <h5 class="alert-heading">Project Context:</h5>
                    This artificial population framework is specifically designed to generate:
                    <ul class="mb-0 mt-2">
                        <li>A synthetic adult population (individuals 16+ and their households)</li>
                        <li>A census summary of those households</li>
                        <li>Survey samples from the population</li>
                        <li>Mythical but demographically realistic geospatial distributions of the island of Meropis
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card mb-5">
            <div class="card-body">
                <h2 class="card-title h3 mb-3">Purpose</h2>
                <p class="card-text">
                    Generate statistically realistic <strong>adult-only populations</strong> with:
                </p>
                <ul>
                    <li><strong>Demographic diversity</strong> across 9 socioeconomic classes</li>
                    <li><strong>Geographic variation</strong> based on 8 urban/rural area types</li>
                    <li><strong>Household composition</strong> reflecting adult living arrangements</li>
                    <li><strong>Compatible relationships</strong> based on multi-dimensional similarity metrics</li>
                    <li><strong>Mythical but demographically realistic</strong> geographic distributions of the island
                        of Meropis</li>
                </ul>
            </div>
        </div>

        <div class="row mb-5">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title h4">Voronoi‑Based Map Generator</h3>
                        <p class="card-text">
                            Jupyter notebook <code>Voronoi-json.ipynb</code>
                        </p>
                        <p class="card-text">
                            This notebook creates a synthetic spatial dataset that mimics administrative regions (e.g.,
                            local‑authority zones) built from clustered points.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-body">
                        <h3 class="card-title h4">Artificial Population Generator</h3>
                        <p class="card-text">
                            Jupyter notebook <code>ArtificialPopulation_dev.ipynb</code>
                        </p>
                        <p class="card-text">
                            Builds a synthetic population model for geographic areas with individual‑level demographic
                            records and realistic households.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-5">
            <div class="card-body">
                <h2 class="card-title h3 mb-3">Voronoi‑Based Map Generator</h2>
                <p class="card-text">
                    Jupyter notebook <code>Voronoi-json.ipynb</code>.
                </p>
                <p class="card-text">
                    This notebook creates a synthetic spatial dataset that mimics administrative regions (e.g.,
                    local‑authority zones) built from clustered points. It:
                </p>
                <ul>
                    <li>Generates a set of points grouped into a configurable number of clusters.</li>
                    <li>Computes the Voronoi diagram for those points.</li>
                    <li>Filters the resulting Voronoi cells, keeping only those whose entire polygon lies inside a
                        predefined circular boundary.</li>
                    <li>Classifies each retained cell (urban, market‑town, agricultural) based on its proximity to
                        cluster centroids and its area relative to the overall average.</li>
                    <li>Exports the filtered cells as a GeoJSON FeatureCollection, ready for GIS tools or further
                        analysis.</li>
                    <li>Visualises the selected polygons with Matplotlib.</li>
                </ul>
                <p class="card-text">
                    The workflow is useful for prototyping spatial analyses, generating test data for geoprocessing
                    pipelines, or teaching concepts such as clustering, Voronoi tessellation, and spatial
                    classification.
                </p>

                <h4 class="mt-4 mb-3">Key Concepts</h4>
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>Concept</th>
                                <th>What the script does</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Clustered point generation</td>
                                <td>Randomly places n_clusters centroids within a user‑defined sub‑range of the unit
                                    square, then scatters n_points around each centroid using a Gaussian offset
                                    (cluster_spread).</td>
                            </tr>
                            <tr>
                                <td>Voronoi tessellation</td>
                                <td>Uses scipy.spatial.Voronoi to partition the plane into convex polygons where each
                                    polygon contains all locations closer to its seed point than to any other seed.</td>
                            </tr>
                            <tr>
                                <td>Circular boundary filter</td>
                                <td>Checks every vertex of a Voronoi cell against a circle (center = (0.5, 0.5), radius
                                    ≈ 0.6). Only cells whose all vertices lie inside the circle are retained.</td>
                            </tr>
                            <tr>
                                <td>Area calculation</td>
                                <td>Computes polygon area via the shoelace formula.</td>
                            </tr>
                            <tr>
                                <td>Administrative area assignment</td>
                                <td>Adds three extra "admin" points (simulating higher‑level boundaries) and assigns
                                    each retained cell to the nearest admin point using Euclidean distance.</td>
                            </tr>
                            <tr>
                                <td>Urban / rural classification</td>
                                <td>• If the cell's seed point lies within 0.1 units of a cluster centroid → city.<br>•
                                    Else, compare cell area to half the mean area:<br>&nbsp;&nbsp;– smaller →
                                    market_town (treated as urban).<br>&nbsp;&nbsp;– larger → agricultural.</td>
                            </tr>
                            <tr>
                                <td>Population attribute</td>
                                <td>Draws a synthetic population value from a normal distribution (mean = 500, σ = 20).
                                </td>
                            </tr>
                            <tr>
                                <td>GeoJSON output</td>
                                <td>Packs each polygon (closed by repeating the first vertex) together with its
                                    properties (id, admin_area, vertices, area, urban, type, population) into a standard
                                    GeoJSON FeatureCollection saved as bounded_polygons.geojson.</td>
                            </tr>
                            <tr>
                                <td>Visualization</td>
                                <td>Plots the retained polygons with semi‑transparent blue fill and black edges,
                                    labeling the figure "Voronoi of Clustered Points of LSOA in Meropis".</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4 class="mt-4 mb-3">Dependencies</h4>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th>Library</th>
                                <th>Version range (tested)</th>
                                <th>Role</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>numpy</td>
                                <td>≥ 1.20</td>
                                <td>Numerical arrays, random sampling, vectorised math.</td>
                            </tr>
                            <tr>
                                <td>scipy (specifically spatial)</td>
                                <td>≥ 1.6</td>
                                <td>Voronoi construction and Euclidean distance.</td>
                            </tr>
                            <tr>
                                <td>matplotlib</td>
                                <td>≥ 3.3</td>
                                <td>Rendering the final plot.</td>
                            </tr>
                            <tr>
                                <td>json (standard library)</td>
                                <td>—</td>
                                <td>Serialising the GeoJSON output.</td>
                            </tr>
                            <tr>
                                <td>random (standard library)</td>
                                <td>—</td>
                                <td>Seed handling and population simulation.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="mt-3">
                    Install the required packages with:<br>
                    <code>pip install numpy scipy matplotlib</code>
                </p>

                <h4 class="mt-4 mb-3">How to Run</h4>
                <p>Adjust parameters (optional) at the top of the script:</p>
                <ul>
                    <li><code>NUMBER_OF_LOCAL_AREAS = 300</code></li>
                    <li><code>NUMBER_OF_CITIES = 2</code></li>
                    <li><code>NUMBER_OF_ADMIN_AREAS = 3</code></li>
                </ul>
                <h5 class="mt-3">Outputs:</h5>
                <ul>
                    <li>Console prints the random seed used, the count of polygons kept, and confirmation of the saved
                        GeoJSON file.</li>
                    <li>An interactive Matplotlib window displays the filtered Voronoi diagram.</li>
                    <li><code>bounded_polygons.geojson</code> appears in the working directory.</li>
                </ul>

                <h4 class="mt-4 mb-3">Output Structure (GeoJSON)</h4>
                <p><code>OUTPUT_FILE = "bounded_polygons.geojson"</code></p>
                <p>Each feature follows this schema:</p>
                <pre class="bg-light p-3 border rounded"><code>{
  "type": "Feature",
  "geometry": {
    "type": "Polygon",
    "coordinates": [[[x0, y0], [x1, y1], ..., [x0, y0]]]
  },
  "properties": {
    "id": &lt;int&gt;,               // sequential identifier
    "admin_area": &lt;int&gt;,       // index of nearest admin point
    "vertices": &lt;int&gt;,         // number of polygon vertices
    "area": &lt;float&gt;,           // computed area (unit‑square units)
    "urban": &lt;bool&gt;,           // true for city/market_town
    "type": "&lt;city|market_town|agricultural&gt;",
    "population": &lt;int&gt;        // synthetic population estimate
  }
}</code></pre>
                <p class="mt-3">
                    The file conforms to the GeoJSON specification and can be loaded into GIS software (QGIS, ArcGIS) or
                    visualised with web mapping libraries (Leaflet, Mapbox GL).
                </p>

                <h4 class="mt-4 mb-3">Limitations & Caveats</h4>
                <ul>
                    <li>Boundary filtering discards any Voronoi cell intersecting the circle, which may bias the
                        retained sample toward centrally located clusters.</li>
                    <li>Area‑based classification uses a simple heuristic (half the mean area); real datasets often
                        require more nuanced metrics.</li>
                    <li>Population model is a naïve Gaussian draw; replace with a demographic model if realism is
                        required.</li>
                    <li>The script assumes a unit square domain; scaling to other extents requires consistent
                        transformation of all geometric entities.</li>
                </ul>
            </div>
        </div>

        <div class="card mb-5">
            <div class="card-body">
                <h2 class="card-title h3 mb-3">Artificial Population Generator</h2>
                <p class="card-text">
                    Jupyter notebook <code>ArtificialPopulation_dev.ipynb</code>
                </p>

                <h4 class="mt-4 mb-3">Purpose</h4>
                <p class="card-text">
                    The notebook builds a synthetic population model for a set of geographic areas (cities, agricultural
                    zones, market towns). It generates individual‑level demographic records, assembles them into
                    realistic households, and then derives aggregate census‑style statistics and a small survey sample.
                    The workflow is fully reproducible and driven by configurable probability tables.
                </p>

                <h4 class="mt-4 mb-3">Core Data Structures</h4>
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>Structure</th>
                                <th>What it Holds</th>
                                <th>Key Fields</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>demographic_profiles</strong></td>
                                <td>Parameter sets for nine socioeconomic groups (e.g.,
                                    <code>affluent_professional</code>, <code>student</code>, <code>retired</code>).
                                </td>
                                <td>Means/std‑dev for age, education, income; race distribution; family‑formation
                                    propensity; household‑type probabilities; typical children.</td>
                            </tr>
                            <tr>
                                <td><strong>area_types</strong></td>
                                <td>Composition of each geographic typology (<code>city</code>,
                                    <code>agricultural</code>, <code>market_town</code>).</td>
                                <td>Demographic mix, household‑type mix, urban flag, density, typical household size.
                                </td>
                            </tr>
                            <tr>
                                <td><strong>household_types</strong></td>
                                <td>Blueprint of six household categories (<code>single</code>, <code>couple</code>,
                                    <code>nuclear family</code>, <code>single‑parent</code>, <code>shared</code>,
                                    <code>multi‑generational</code>).</td>
                                <td>Human‑readable description + size‑distribution (probability of 1‑6 occupants).</td>
                            </tr>
                            <tr>
                                <td><strong>Generated Individuals</strong></td>
                                <td>One dict per person.</td>
                                <td><code>id</code>, <code>area</code>, <code>admin_area</code>,
                                    <code>demographic_id</code>, <code>age</code>, <code>education</code>,
                                    <code>gender</code>, <code>ethnicity</code>, <code>family_ratio</code>,
                                    <code>income</code>, plus household tracking fields (<code>in_household</code>,
                                    <code>household_id</code>, <code>relationship</code>).</td>
                            </tr>
                            <tr>
                                <td><strong>Households</strong></td>
                                <td>One dict per household.</td>
                                <td><code>hh_id</code>, <code>area_id</code>, <code>admin_area</code>,
                                    <code>urban</code>, <code>members</code> (list of person dicts), derived
                                    <code>size</code>.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4 class="mt-4 mb-3">Generation Pipeline</h4>
                <h5 class="mt-3">Base Population (<code>generate_individuals</code>)</h5>
                <ul>
                    <li>Uses a roulette‑wheel (cumulative probability) to draw a demographic profile for each person
                        according to the area's <code>demographic_distribution</code>.</li>
                    <li>Draws continuous attributes from normal distributions (<code>age</code>, <code>education</code>,
                        <code>income</code>) and categorical attributes (<code>gender</code>, <code>ethnicity</code>)
                        from the profile's defined probabilities.</li>
                </ul>

                <h5 class="mt-3">Household Formation (<code>create_area_population</code>)</h5>
                <ul>
                    <li>Repeatedly selects a head from the remaining pool.</li>
                    <li>Blends the head's personal household‑type probabilities with the area‑level household
                        distribution via <code>combine_probabilities</code> (simple Bayesian multiplication).</li>
                    <li>Chooses a household type and size using roulette‑wheel sampling on the resulting distributions.
                    </li>
                    <li>Depending on the type, calls one of three helper routines:
                        <ul>
                            <li><code>couple</code> – finds a compatible partner (heterosexual bias, similarity
                                scoring).</li>
                            <li><code>shared_household</code> – fills a non‑romantic house with similar adults.</li>
                            <li><code>multi_generational</code> – adds a partner then older relatives.</li>
                        </ul>
                    </li>
                    <li>Updates each person's <code>in_household</code>, <code>relationship</code>, and
                        <code>household_id</code>.</li>
                </ul>

                <h5 class="mt-3">Census Summary (<code>calculate_census</code>)</h5>
                <p>Walks every household to compute:</p>
                <ul>
                    <li>Total population, urban vs. rural household counts.</li>
                    <li>Household‑size histogram (1, 2, 3, 4+).</li>
                    <li>Age‑by‑gender buckets (0‑30, 30‑60, >60).</li>
                    <li>Education tier counts (non‑educated, low, middle, high).</li>
                </ul>

                <h5 class="mt-3">Survey Sample</h5>
                <ul>
                    <li>Randomly selects <strong>1%</strong> of households (<code>survay</code>).</li>
                    <li>For each sampled household, <code>calculate_survey</code> produces the same set of aggregates as
                        the full census, while also preserving the raw member list.</li>
                </ul>

                <h5 class="mt-3">Export</h5>
                <p>Helper <code>dicts_to_csv</code> writes three CSV files:</p>
                <ol>
                    <li><code>artifical_cencus.csv</code> – census aggregates per area.</li>
                    <li><code>artifical_population.csv</code> – flat list of all generated individuals.</li>
                    <li><code>artifical_survay.csv</code> – survey‑level aggregates.</li>
                    <li><code>compleate_artifical_individual_survey.csv</code> – raw individuals from the survey sample.
                    </li>
                </ol>

                <h4 class="mt-4 mb-3">Key Algorithms</h4>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th>Algorithm</th>
                                <th>Role</th>
                                <th>Highlights</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Roulette‑Wheel Sampling</strong></td>
                                <td>Random selection proportional to defined probabilities (demographics, household
                                    types, size).</td>
                                <td>Simple cumulative‑sum approach; deterministic once the RNG seed
                                    (<code>np.random.default_rng(seed=42)</code>) is set.</td>
                            </tr>
                            <tr>
                                <td><strong>Similarity Scoring (<code>calculate_similarity_score</code>)</strong></td>
                                <td>Determines partner compatibility for <code>couple</code>‑type households.</td>
                                <td>Weighted combination of age, education, income (log‑scaled), ethnicity, and
                                    demographic profile similarity. Includes a <strong>90% hetero bias</strong>.</td>
                            </tr>
                            <tr>
                                <td><strong>Non‑Gender Similarity
                                        (<code>calculate_similarity_score_non_gender</code>)</strong></td>
                                <td>Used for <code>shared_household</code> matching where gender is irrelevant.</td>
                                <td>Same weighted factors but without the gender filter.</td>
                            </tr>
                            <tr>
                                <td><strong>Bayesian Blending (<code>combine_probabilities</code>)</strong></td>
                                <td>Merges individual‑level and area‑level household probabilities.</td>
                                <td>Multiplication followed by renormalisation; falls back to uniform distribution if
                                    all products are zero.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h4 class="mt-4 mb-3">Execution Flow (Top‑Level Script)</h4>
                <pre class="bg-light p-3 border rounded"><code>with open("bounded_polygons.geojson") as f:
    geojson_obj = json.load(f)

for each feature in geojson_obj["features"]:
    # 1. Resolve area type & urban flag
    # 2. Generate individuals & households via create_area_population(...)
    # 3. Derive census stats with calculate_census(...)
    # 4. Accumulate global lists (population, households, census)

### Export CSVs
dicts_to_csv(census, "artifical_cencus.csv")
dicts_to_csv(population, "artifical_population.csv")</code></pre>

                <h4 class="mt-4 mb-3">Limitations & Assumptions</h4>
                <ul>
                    <li><strong>Static Distributions</strong> – All probabilities are hard‑coded; real‑world calibration
                        would require external data sources.</li>
                    <li><strong>Simplified Ethnicity Handling</strong> – Uses cumulative probabilities but stores
                        ethnicity as an integer index only.</li>
                    <li><strong>Gender Bias</strong> – A 90% heterosexual assumption is baked into
                        <code>calculate_similarity_score</code>; this can be toggled if needed.</li>
                    <li><strong>No Spatial Interaction</strong> – Households are formed purely from the pool of
                        individuals within an area; cross‑area commuting or migration is not modeled.</li>
                    <li><strong>Age/Education Bounds</strong> – Generated values are not explicitly clamped beyond the
                        normal distribution; extreme outliers may appear.</li>
                </ul>
            </div>
        </div>

        <footer class="text-center text-muted mt-5 mb-3">
            <p>Meropis - Artificial Population Generator for Geospatial Simulation</p>
        </footer>
    </div>
</body>

</html>